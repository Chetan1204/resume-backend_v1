<div style="width: 100%;height: 100%;padding: 20px;">
	<div>
		<h3><%= modelData?.modelName %></h3>
		<p>Edit model this model accross the website.</p>
	</div>
		<div style="display: flex; align-items: center; justify-content: space-between; width: 45%;padding: 10px 0px 20px 0px; border-bottom: 4px solid #315BC1;margin-bottom: 10px;">
			<p style="margin: 0;">Define your model:</p>
			<button style="border:none;background-color: #315BC1;color: #fff;padding: 7px 26px;font-size: 13x;font-weight: 600;"type="button" onclick="addfield();">Add new field</button>
		</div>
		<div id="inputs-container" style="width: 45%;">
			<input type="hidden" name="modelName" value="<%= modelData?.modelName %>">
			<% if(modelData?.dataObject) { Object.keys(modelData?.dataObject).forEach(item => { %>
			<div class="input-group mb-3" style="border: 1px solid rgba(0, 0, 0, 0.25);">
				<span style="background-color: #d5d5d5;font-weight: 500;border-radius: 0px;" class="input-group-text">Key Name</span>
				<input type="text" class="form-control" placeholder="Enter a key" name="<%= item %>" value="<%= item %>" aria-label="Enter a key" required>
				<span style="background-color: #d5d5d5;font-weight: 500;border-radius: 0px;" class="input-group-text">Data Type</span>
				<select class="form-select" aria-label="Default select example" name="<%= item %>">
					<option <%= modelData?.dataObject[item] == "String" && "selected" %> value="String">String</option>
					<option <%= modelData?.dataObject[item] == "Boolean" && "selected" %> value="Boolean">Boolean</option>
					<option <%= modelData?.dataObject[item] == "Number" && "selected" %> value="Number">Number</option>
					<option <%= modelData?.dataObject[item] == "Mixed" && "selected" %> value="Mixed">Mixed</option>
				</select>
			</div>
			<% }); }%>
		</div>
		<button style="border:none;background-color: #315BC1;color: #fff;padding: 7px 26px;font-size: 13x;font-weight: 600;" onclick="handlesubmit()">Update Model</button>
	<script>
		window.addEventListener("DOMContentLoaded", ()=>{
			const container = document.getElementById("inputs-container");
			const children = container.querySelectorAll(".input-group");
			if(chidren?.length == 0){
				addfield();
				addfield();
			}
		})
		function addfield() {
			const inputsContainer = document.getElementById("inputs-container");
			const newdiv = document.createElement('div');
			newdiv.innerHTML = `<div class="input-group mb-3" style="border: 1px solid rgba(0, 0, 0, 0.25);">
				<span style="background-color: #d5d5d5;font-weight: 500;border-radius: 0px;" class="input-group-text">Key Name</span>
				<input type="text" class="form-control" placeholder="Enter a key" aria-label="Enter a key" required>
				<span style="background-color: #d5d5d5;font-weight: 500;border-radius: 0px;" class="input-group-text">Data Type</span>
				<select class="form-select" aria-label="Default select example" required>
					<option selected value="String">String</option>
					<option value="Boolean">Boolean</option>
					<option value="Number">Number</option>
					<option value="Mixed">Mixed</option>
				</select>
			</div>`;

			inputsContainer.appendChild(newdiv);

		}

		function handlesubmit() {
			let data = {};
			const inputContainer = document.getElementById("inputs-container");
			const modelName = inputContainer.querySelector("input[name='modelName']").value;
			const allInputs = inputContainer.querySelectorAll('input:not([name="modelName"])');
			allInputs.forEach(input => {
				
				const parent = input.closest(".input-group");
				const selectItem = parent.querySelector(".form-select");
				const inputValue = input.value;
				const selectValue = selectItem.value;
				data[inputValue?.split(" ").join("")?.toLowerCase()] = selectValue;
			})

			fetch("/manage/add-model-data", {
				method:"POST",
				headers:{
					"Content-Type":"application/json"
				},
				body:JSON.stringify({ modelName,modelData:data})
			}).then(res => res.json()).then(data => window.location.reload())
		}
	</script>
</div>