<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://kit.fontawesome.com/e1dea6157c.js" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js" integrity="sha512-nnzkI2u2Dy6HMnzMIkh7CPd1KX445z38XIu4jG1jGw7x5tSL3VBjE44dY4ihMU1ijAQV930SPM12cCFrB18sVw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
		crossorigin="anonymous"></script>
	<script src="/ckeditor/ckeditor.js"></script>
	<title>U-CMS</title>
	<link rel="icon" type="images/png" href="/favicon.png">
	<link rel="stylesheet" href="/style.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/mode/javascript/javascript.min.js"></script>
</head>

<body class="doc-body" style="height: 100% !important;">
	<!--Main Navigation-->
	<style>
		body,
		html {
			height: 100%;
			margin: 0;
			overflow: hidden;
		}

		.menu-title-item {
			transition: all 400ms ease;
		}

		#all-pages-link:hover {
			background-color: rgba(255, 255, 255, 0.08);
		}

		.menu-title-item .menu-title-list li {
			transition: all 400ms ease;
		}

		.eeEjFz {
			border: 0.5px solid rgb(69, 75, 100);
			flex: 0 0 auto;
			order: 3;
			align-self: stretch;
			-webkit-box-flex: 0;
			margin: 18px 0px;
		}

	</style>
	<header style="height: 25px">
		<div
			style="background-color: #2E3345;color: #fff;display: flex;align-items: center;justify-content: space-between;gap: 10px;padding: 8px;height: 25px;">
			<p style="font-weight: 600;font-size: 13px;margin: 0px;">Express Backend Server</p>
			<p style="font-weight: 600;font-size: 13px;margin: 0px; color: #ddd;">Conative IT Solutions</p>
		</div>
	</header>
	<main style="display: flex;height: calc(100% - 25px);">
		<!-- Sidebar -->
		<div id="main-sidebar" class="flex-shrink-0" style="width: 200px;background-color: #2E3345;height: 100%;overflow: hidden;">
			<ul class="list-unstyled ps-0">
				<li class="mb-1">
					<div class="menu-title-item align-items-center "
						style="width: 100%; padding:5px 12px ;color: #fff;  font-size: 13px;line-height: 22px;font-weight: 600;text-transform: uppercase;letter-spacing: 0.5px;background: linear-gradient(to top, #1e3c72 0%, #1e3c72 1%, #2a5298 100%);text-align: center;"
						data-bs-toggle="collapse">
						Dashboard <i style="color: #f0f0f1;margin-left: 10px; " class="fa-solid fa-bolt"></i>
					</div>
				</li>
				<li class="mb-1">
					<div class="menu-title-item align-items-center collapsed "
						style="width: 100%; padding:5px 12px ;color: #fff;  font-size: 11px;line-height: 22px;font-weight: 600;text-transform: uppercase;letter-spacing: 0.5px;"
						data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
						Pages
					</div>
					<div class="collapse show" id="home-collapse">
						<ul class="menu-title-list btn-toggle-nav list-unstyled fw-normal  small">
							<li>
								<a id="all-pages-link" href="/api/v1/manage/all-pages"
									style="padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i
										class="fa-solid fa-copy" style="margin-right: 10px;"></i>All
									Pages</a>
							</li>
							<li>
								<a id="all-pages-link" href="/api/v1/manage/add-new-page" style="padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i class="fa-solid fa-plus" style="margin-right: 10px;"></i> Add New Page</a>
							</li>
						</ul>
					</div>
				</li>
				<div class="Divider__StyledDivider-sc-1vy16c4-0 eeEjFz"></div>
				<li class="mb-1">
					<div class="menu-title-item align-items-center collapsed "
						style="width: 100%; padding:5px 12px ;color: #fff;  font-size: 11px;line-height: 22px;font-weight: 600;text-transform: uppercase;letter-spacing: 0.5px;"
						data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
						ACF
					</div>
					<div class="collapse show" id="home-collapse">
						<ul id="model-ul-list" class="menu-title-list btn-toggle-nav list-unstyled fw-normal  small">
							<li><a id="all-pages-link" href="/api/v1/manage/all-models"
									style="padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400; width: 100%;display: inline-block;"><i
										class="fa-solid fa-shapes" style="margin-right: 10px;"></i>All
									Custom Fields</a></li>
							<li id="add-new-model-li"><a id="all-pages-link" href="/api/v1/manage/add-new-model" style="padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i class="fa-solid fa-plus" style="margin-right: 10px;"></i>Add New</a></li>
						</ul>
					</div>
				</li>
				<div class="Divider__StyledDivider-sc-1vy16c4-0 eeEjFz"></div>
				<li class="mb-1">
					<div class="menu-title-item align-items-center collapsed "
						style="width: 100%; padding:5px 12px ;color: #fff;  font-size: 11px;line-height: 22px;font-weight: 600;text-transform: uppercase;letter-spacing: 0.5px;"
						data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
						Post Types
					</div>
					<div class="collapse show" id="home-collapse">
						<ul id="post-type-ul" class="menu-title-list btn-toggle-nav list-unstyled fw-normal  small">
							<li><a id="all-pages-link" href="/api/v1/manage/render-all-post-types"
									style="padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i
										class="fa-solid fa-table-list"
										style="margin-right: 10px;"></i>All Post Types</a></li>
							<li id="add-new-post-type-li"><a id="all-pages-link" href="/api/v1/manage/render-add-post-type"
									style="padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i
										class="fa-solid fa-plus" style="margin-right: 10px;"></i>Add Post Type</a></li>
						</ul>
					</div>
				</li>
			</ul>
		</div>

		<!--Main layout-->
		<div style="display: flex;align-items: start;justify-content: start;height: 100%;width: calc(100% - 200px); overflow: hidden;">
			<%- body %>
		</div>

	</main>
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			var links = document.querySelectorAll(".menu-title-list a");

			function setActiveLink() {
				var currentURL = window.location.pathname;

				links.forEach(function (link) {
					var linkURL = link.getAttribute("href");
					liElement = link.closest("li");
					if (currentURL.includes(linkURL)) {
						liElement.classList.add("active");
					} else {
						liElement.classList.remove("active");
					}
				});
			}

			setActiveLink();

			function navigateTo(url) {
				window.location.href = url;
			}
			
			fetch("/api/v1/manage/all-model-names-and-links").then(res => res.json()).then(data => {
				const modelList = document.getElementById("model-ul-list");
				const lastLi = document.getElementById("add-new-model-li");
				data?.data?.forEach(item => {
					const newLi = document.createElement("li");
					newLi.innerHTML = `<a id="all-pages-link" href="/api/v1/manage/rendermodel?modelname=${encodeURIComponent(item.modelName)}"
										style="color: #B4B6BC;  padding: 8px 0px 8px 12px;font-size:13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i
											class="fa-solid fa-thumbtack" style="color: #d1d1d1;margin-right: 10px;"></i>${item?.modelName}</a>`;
					newLi.style.backgroundColor = "#424757"
					modelList.insertBefore(newLi, lastLi)
				})
			});

			fetch("/api/v1/manage/get-post-types-and-links").then(res =>res.json()).then(data => {
				const postTypeList = document.getElementById("post-type-ul");
				const lastLi = document.getElementById("add-new-post-type-li");
				data?.data?.forEach(item => {
					const newLi = document.createElement("li");
					newLi.innerHTML = `<a id="all-pages-link" href="/api/v1/manage/show-posts-by-post-type/${encodeURIComponent(item?._id)}"
										style="color: #B4B6BC;  padding: 8px 0px 8px 12px;font-size: 13px;line-height: 1.25rem;font-weight: 400;width: 100%;display: inline-block;"><i
											class="fa-solid fa-thumbtack" style="color: #d1d1d1;margin-right: 10px;"></i>${item?.postTypeName}</a>`;
					newLi.style.backgroundColor = "#424757"
					postTypeList.insertBefore(newLi, lastLi)
				})
			})
		});
	</script>




</body>

</html>